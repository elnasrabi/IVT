// Overwrite global.Promise with Bluebird
// Replace the scheduler with setImmediate so we can write sync tests
import Bluebird from 'bluebird'
Bluebird.setScheduler(fn => {
  global.setImmediate(fn)
})
global.Promise = Bluebird

// Reference: https://babeljs.io/docs/usage/polyfill/
// Reference: https://github.com/zloirock/core-js
// Polyfill a full ES6 environment
import 'babel/polyfill'

// Make sure that requestAnimationFrame is defined for browsers like PhantomJS
import raf from 'raf'
window.requestAnimationFrame = window.requestAnimationFrame || raf

// Reference: https://github.com/webpack/karma-webpack#alternative-usage
var context = require.context('./source', true, /\.test\.(js|jsx)$/)
context.keys().forEach(context)
